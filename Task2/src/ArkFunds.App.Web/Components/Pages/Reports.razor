@page "/reports"
@page "/"
@rendermode InteractiveServer

@using ArkFunds.App.Web.Api
@inject IReportsClient reportsClient;

<PageTitle>Reports</PageTitle>

<div style="display: flex; justify-content: space-between;">
    <h1>Reports</h1>
    <div style="display: flex; flex-direction: column; align-items: end;">
        <button @onclick="async () => await GenerateReport()"
                disabled="@isGeneratingReport"
                style="border-radius: 8px; width: 160px; height: 60px">
            @if (isGeneratingReport)
            {
                <span>Loading...</span>
            }
            else
            {
                <span>Generate report</span>
            }
        </button>
        <span style="color: red;">@error</span>
    </div>
</div>

@if (isLoading)
{
    <span>Loading...</span>
}
else if (!currentReportExists)
{
    <span>No reports available.</span>
} else
{
    <RadzenDataGrid Data="@report.IncreaedPositions">
        <Columns>
            <RadzenDataGridColumn Property="Company" Title="Company name" Frozen="true" Width="80px" TextAlign="TextAlign.Center" />
            <RadzenDataGridColumn Property="Ticker" Title="Ticker" Frozen="true" Width="30px" TextAlign="TextAlign.Center" />
            <RadzenDataGridColumn Property="Shares" Title="Shares" Frozen="true" Width="40px" TextAlign="TextAlign.Center" />
            <RadzenDataGridColumn Property="Weight" Title="Weight" Frozen="true" Width="30px" TextAlign="TextAlign.Center" />
        </Columns>
    </RadzenDataGrid>
    @* <ReportTables Report="report" /> *@
}
